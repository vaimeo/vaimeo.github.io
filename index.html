<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wajid Abid Khan | Portfolio</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Noto Sans', sans-serif;
            background: #0D1117; /* Dark background similar to a terminal */
            color: #E2E8F0;
            position: relative;
            overflow-x: hidden;
            background: linear-gradient(180deg, #0D1117 0%, #1A202C 100%);
            background-size: 100% 200%;
            animation: sunrise 60s ease-in-out infinite alternate;
        }

        /* --- Futuristic Design Elements --- */

        /* Glowing Border effect */
        .glowing-border {
            border: 1px solid transparent;
            border-image: linear-gradient(45deg, #38BDF8, #8B5CF6) 1;
            box-shadow: 0 0 10px rgba(56, 189, 248, 0.5), 0 0 20px rgba(139, 92, 246, 0.5);
            transition: all 0.3s ease;
        }

        /* Active tab glow */
        .tab-button.active {
            color: #38BDF8;
            border-bottom: 2px solid #38BDF8;
            transition: all 0.3s ease;
        }

        /* Glitch effect for titles */
        .glitch-text {
            position: relative;
        }

        .glitch-text::before,
        .glitch-text::after {
            content: attr(data-text);
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: inherit;
            overflow: hidden;
        }

        .glitch-text::before {
            left: 2px;
            text-shadow: -2px 0 #38BDF8;
            animation: glitch-anim-1 2s infinite linear alternate-reverse;
        }

        .glitch-text::after {
            left: -2px;
            text-shadow: -2px 0 #8B5CF6;
            animation: glitch-anim-2 2.5s infinite linear alternate-reverse;
        }

        @keyframes glitch-anim-1 {
            0% { clip-path: inset(0 0 95% 0); }
            20% { clip-path: inset(0 0 3% 0); }
            40% { clip-path: inset(60% 0 30% 0); }
            60% { clip-path: inset(80% 0 10% 0); }
            80% { clip-path: inset(10% 0 80% 0); }
            100% { clip-path: inset(30% 0 50% 0); }
        }

        @keyframes glitch-anim-2 {
            0% { clip-path: inset(90% 0 5% 0); }
            20% { clip-path: inset(5% 0 80% 0); }
            40% { clip-path: inset(30% 0 60% 0); }
            60% { clip-path: inset(10% 0 90% 0); }
            80% { clip-path: inset(50% 0 20% 0); }
            100% { clip-path: inset(70% 0 10% 0); }
        }

        @keyframes sunrise {
            0% { background-position: 0% 100%; }
            100% { background-position: 0% 0%; }
        }
    </style>
</head>
<body class="bg-gray-900 text-white min-h-screen flex flex-col items-center p-4">

    <div class="w-full max-w-4xl mx-auto py-12">
        <!-- Header Section -->
        <header class="text-center mb-8">
            <div class="w-32 h-32 mx-auto mb-4 rounded-full overflow-hidden border-4 border-gray-700 shadow-lg">
                <img src="https://placehold.co/128x128/333333/FFFFFF?text=Wajid" alt="Profile Picture" class="w-full h-full object-cover">
            </div>
            <h1 class="text-4xl sm:text-5xl font-extrabold text-blue-300 mb-2" data-text="Wajid Abid Khan">Wajid Abid Khan</h1>
            <p class="text-lg text-gray-400 font-medium">Software In-charge at Fodel FZE <span class="text-green-400 block sm:inline-block">| Currently in Dubai, UAE</span></p>
            <p class="text-sm text-gray-500 mt-2">"Experienced full-stack web developer specializing in PHP, JavaScript (Node.js, AJAX, jQuery, JSON, REST)."</p>
        </header>

        <!-- Tab Navigation -->
        <nav class="flex justify-center flex-wrap space-x-4 mb-8">
            <button class="tab-button px-4 py-2 text-gray-400 font-medium transition-colors duration-300 hover:text-white" data-tab="about">About</button>
            <button class="tab-button px-4 py-2 text-gray-400 font-medium transition-colors duration-300 hover:text-white" data-tab="skills">Skills</button>
            <button class="tab-button px-4 py-2 text-gray-400 font-medium transition-colors duration-300 hover:text-white" data-tab="experience">Experience</button>
            <button class="tab-button px-4 py-2 text-gray-400 font-medium transition-colors duration-300 hover:text-white" data-tab="achievements">Achievements</button>
            <button class="tab-button px-4 py-2 text-gray-400 font-medium transition-colors duration-300 hover:text-white" data-tab="projects">Projects</button>
            <button class="tab-button px-4 py-2 text-gray-400 font-medium transition-colors duration-300 hover:text-white" data-tab="contact">Contact</button>
            <button class="tab-button px-4 py-2 text-gray-400 font-medium transition-colors duration-300 hover:text-white" data-tab="gemini">AI Assistant</button>
        </nav>

        <!-- Content Sections -->
        <div id="tab-content" class="w-full">
            <!-- About Section -->
            <section id="about" class="tab-section bg-gray-800 rounded-xl p-8 shadow-2xl glowing-border mb-12">
                <h2 class="text-2xl font-bold text-purple-300 mb-4 glitch-text" data-text="About Me">About Me</h2>
                <p class="text-gray-300 leading-relaxed">
                    With over a decade of experience developing dynamic web applications, I have honed my skills in both browser and server-side scripting. My expertise lies in architecting and implementing robust systems using PHP, JavaScript frameworks like Node.js and jQuery, and integrating with RESTful APIs. I am passionate about solving complex technical challenges and contributing to a thriving developer community, as demonstrated by my active participation on Stack Overflow.
                </p>
            </section>

            <!-- Skills & Expertise Section -->
            <section id="skills" class="tab-section hidden bg-gray-800 rounded-xl p-8 shadow-2xl glowing-border mb-12">
                <h2 class="text-2xl font-bold text-purple-300 mb-6 glitch-text" data-text="Skills & Expertise">Skills & Expertise</h2>
                <div class="flex flex-wrap gap-4">
                    <span class="bg-blue-600 text-white text-sm font-semibold px-4 py-2 rounded-full shadow-lg">PHP</span>
                    <span class="bg-blue-600 text-white text-sm font-semibold px-4 py-2 rounded-full shadow-lg">JavaScript</span>
                    <span class="bg-blue-600 text-white text-sm font-semibold px-4 py-2 rounded-full shadow-lg">AJAX</span>
                    <span class="bg-blue-600 text-white text-sm font-semibold px-4 py-2 rounded-full shadow-lg">jQuery</span>
                    <span class="bg-blue-600 text-white text-sm font-semibold px-4 py-2 rounded-full shadow-lg">JSON</span>
                    <span class="bg-blue-600 text-white text-sm font-semibold px-4 py-2 rounded-full shadow-lg">Node.js</span>
                    <span class="bg-blue-600 text-white text-sm font-semibold px-4 py-2 rounded-full shadow-lg">REST</span>
                    <span class="bg-blue-600 text-white text-sm font-semibold px-4 py-2 rounded-full shadow-lg">cURL</span>
                </div>
            </section>

            <!-- Experience Section -->
            <section id="experience" class="tab-section hidden bg-gray-800 rounded-xl p-8 shadow-2xl glowing-border mb-12">
                <h2 class="text-2xl font-bold text-purple-300 mb-6 glitch-text" data-text="Experience">Experience</h2>
                <div class="space-y-6">
                    <!-- Job 1 -->
                    <div>
                        <h3 class="text-xl font-semibold text-blue-300">Software In-charge</h3>
                        <p class="text-gray-400 font-medium">Fodel FZE · 2018 – Present</p>
                        <ul class="list-disc list-inside text-gray-300 mt-2 space-y-1">
                            <li>Managed and led a team of developers in designing and deploying scalable web applications.</li>
                            <li>Oversaw the full software development lifecycle, from concept to deployment and maintenance.</li>
                            <li>Implemented robust RESTful APIs to facilitate seamless data exchange between systems.</li>
                        </ul>
                    </div>
                    <!-- Job 2 Placeholder -->
                    <div>
                        <h3 class="text-xl font-semibold text-blue-300">Senior Web Developer</h3>
                        <p class="text-gray-400 font-medium">Previous Company · 2015 – 2018</p>
                        <ul class="list-disc list-inside text-gray-300 mt-2 space-y-1">
                            <li>Developed and maintained client-side applications using JavaScript, jQuery, and AJAX.</li>
                            <li>Contributed to a high-traffic e-commerce platform by optimizing server-side PHP scripts.</li>
                        </ul>
                    </div>
                </div>
            </section>
            
            <!-- Achievements & Certifications Section -->
            <section id="achievements" class="tab-section hidden bg-gray-800 rounded-xl p-8 shadow-2xl glowing-border mb-12">
                <h2 class="text-2xl font-bold text-purple-300 mb-6 glitch-text" data-text="Achievements">Achievements & Certifications</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Stack Overflow Badge -->
                    <div class="flex items-center space-x-4 bg-gray-900 rounded-xl p-4 shadow-inner border border-gray-700">
                        <img src="https://placehold.co/32x32/ff7b00/ffffff?text=SO" alt="Stack Overflow Icon" class="w-8 h-8 rounded-full">
                        <div>
                            <p class="text-sm font-semibold">Stack Overflow Contributor</p>
                            <a href="https://stackoverflow.com/users/1294231/vaimeo" target="_blank" class="text-xs text-gray-400 hover:underline">1294231 - vaimeo</a>
                        </div>
                    </div>
                    <!-- GitHub Badge -->
                    <div class="flex items-center space-x-4 bg-gray-900 rounded-xl p-4 shadow-inner border border-gray-700">
                        <img src="https://placehold.co/32x32/1a202c/ffffff?text=GH" alt="GitHub Icon" class="w-8 h-8 rounded-full">
                        <div>
                            <p class="text-sm font-semibold">GitHub Profile</p>
                            <a href="https://github.com/Wajid-Abid-Khan" target="_blank" class="text-xs text-gray-400 hover:underline">Wajid-Abid-Khan</a>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Projects Section -->
            <section id="projects" class="tab-section hidden bg-gray-800 rounded-xl p-8 shadow-2xl glowing-border mb-12">
                <h2 class="text-2xl font-bold text-purple-300 mb-6 glitch-text" data-text="Projects">Projects</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Project 1 -->
                    <div class="bg-gray-900 rounded-xl p-6 shadow-inner border border-gray-700">
                        <h3 class="text-xl font-semibold text-blue-300 mb-2">E-commerce Platform Backend</h3>
                        <p class="text-gray-400 text-sm mb-4">A high-performance backend system built on Node.js and PHP.</p>
                        <a href="#" class="text-purple-400 hover:underline">View Project</a>
                    </div>
                    <!-- Project 2 -->
                    <div class="bg-gray-900 rounded-xl p-6 shadow-inner border border-gray-700">
                        <h3 class="text-xl font-semibold text-blue-300 mb-2">Real-time Chat Application</h3>
                        <p class="text-gray-400 text-sm mb-4">A web-based chat app with real-time updates using WebSockets.</p>
                        <a href="#" class="text-purple-400 hover:underline">View Project</a>
                    </div>
                </div>
            </section>

            <!-- Contact Section -->
            <section id="contact" class="tab-section hidden bg-gray-800 rounded-xl p-8 shadow-2xl glowing-border mb-12">
                <h2 class="text-2xl font-bold text-purple-300 mb-6 glitch-text" data-text="Contact">Contact</h2>
                <div class="flex flex-col md:flex-row gap-8">
                    <div class="flex-1 space-y-4">
                        <p class="text-gray-300">Feel free to connect with me through the following channels:</p>
                        <div class="flex items-center space-x-4">
                            <img src="https://placehold.co/32x32/38BDF8/FFFFFF?text=E" alt="Email Icon" class="w-8 h-8 rounded-full">
                            <a href="mailto:wajid.abid.khan@gmail.com" class="text-blue-300 hover:underline">wajid.abid.khan@gmail.com</a>
                        </div>
                        <div class="flex items-center space-x-4">
                            <img src="https://placehold.co/32x32/8B5CF6/FFFFFF?text=L" alt="LinkedIn Icon" class="w-8 h-8 rounded-full">
                            <a href="#" target="_blank" class="text-purple-300 hover:underline">linkedin.com/in/wajid-abid-khan</a>
                        </div>
                    </div>
                    <div class="flex-1">
                        <form class="space-y-4">
                            <div>
                                <label for="name" class="block text-gray-400">Name</label>
                                <input type="text" id="name" name="name" class="w-full bg-gray-900 border border-gray-700 rounded-md p-2 text-gray-200">
                            </div>
                            <div>
                                <label for="email" class="block text-gray-400">Email</label>
                                <input type="email" id="email" name="email" class="w-full bg-gray-900 border border-gray-700 rounded-md p-2 text-gray-200">
                            </div>
                            <div>
                                <label for="message" class="block text-gray-400">Message</label>
                                <textarea id="message" name="message" rows="4" class="w-full bg-gray-900 border border-gray-700 rounded-md p-2 text-gray-200"></textarea>
                            </div>
                            <button type="submit" class="bg-blue-600 text-white px-6 py-2 rounded-md font-semibold hover:bg-blue-700 transition-colors duration-300">Send Message</button>
                        </form>
                    </div>
                </div>
            </section>

            <!-- Gemini AI Assistant Section -->
            <section id="gemini" class="tab-section hidden bg-gray-800 rounded-xl p-8 shadow-2xl glowing-border mb-12">
                <h2 class="text-2xl font-bold text-purple-300 mb-6 glitch-text" data-text="AI Assistant">AI Assistant</h2>
                <div class="space-y-4">
                    <p class="text-gray-300">Ask the AI a question related to tech, development, or anything you'd like to learn more about!</p>
                    <textarea id="prompt-input" class="w-full h-32 p-4 rounded-lg bg-gray-900 text-gray-200 border border-gray-700 focus:outline-none focus:border-blue-500 transition-colors duration-200" placeholder="e.g., Explain the difference between PHP and Node.js"></textarea>
                    <button id="generate-button" class="bg-blue-600 text-white px-6 py-2 rounded-md font-semibold hover:bg-blue-700 transition-colors duration-300">Ask</button>
                    <div id="loading-indicator" class="hidden text-gray-400 italic mt-2">Thinking...</div>
                    <div id="gemini-output" class="p-4 rounded-lg bg-gray-900 border border-gray-700 text-gray-200 mt-4 min-h-[100px] whitespace-pre-wrap">The answer will appear here.</div>
                </div>
            </section>

        </div>
    </div>

    <!-- JavaScript for Tab Functionality and Gemini API -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const tabButtons = document.querySelectorAll('.tab-button');
            const tabSections = document.querySelectorAll('.tab-section');

            // Set the 'About' tab as active by default
            const aboutButton = document.querySelector('[data-tab="about"]');
            const aboutSection = document.getElementById('about');
            if (aboutButton && aboutSection) {
                aboutButton.classList.add('active');
                aboutSection.classList.remove('hidden');
            }

            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const tab = button.dataset.tab;

                    // Remove 'active' class from all buttons and 'hidden' from all sections
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    tabSections.forEach(sec => sec.classList.add('hidden'));

                    // Add 'active' class to the clicked button and show the corresponding section
                    button.classList.add('active');
                    document.getElementById(tab).classList.remove('hidden');
                });
            });

            // Gemini API Integration
            const promptInput = document.getElementById('prompt-input');
            const generateButton = document.getElementById('generate-button');
            const geminiOutput = document.getElementById('gemini-output');
            const loadingIndicator = document.getElementById('loading-indicator');

            // Function to handle the API call with exponential backoff
            async function fetchWithExponentialBackoff(url, options, maxRetries = 5, retryDelay = 1000) {
                for (let i = 0; i < maxRetries; i++) {
                    try {
                        const response = await fetch(url, options);
                        if (response.status === 429) { // Too Many Requests
                            const delay = retryDelay * Math.pow(2, i);
                            console.warn(`Rate limit exceeded. Retrying in ${delay}ms...`);
                            await new Promise(res => setTimeout(res, delay));
                            continue;
                        }
                        return response;
                    } catch (error) {
                        if (i < maxRetries - 1) {
                            const delay = retryDelay * Math.pow(2, i);
                            console.error(`Fetch failed. Retrying in ${delay}ms...`);
                            await new Promise(res => setTimeout(res, delay));
                        } else {
                            throw error;
                        }
                    }
                }
                throw new Error('Max retries exceeded');
            }

            generateButton.addEventListener('click', async () => {
                const prompt = promptInput.value.trim();
                if (!prompt) {
                    geminiOutput.textContent = "Please enter a question to get a response.";
                    return;
                }

                geminiOutput.textContent = '';
                loadingIndicator.classList.remove('hidden');

                const systemPrompt = `You are a helpful and knowledgeable AI assistant. You will answer the user's questions in a clear, concise, and professional manner, formatted with markdown.`;
                const userQuery = prompt;
                const apiKey = ""; // API key is provided at runtime by the Canvas environment
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

                const payload = {
                    contents: [{ parts: [{ text: userQuery }] }],
                    tools: [{ "google_search": {} }],
                    systemInstruction: {
                        parts: [{ text: systemPrompt }]
                    },
                };

                try {
                    const response = await fetchWithExponentialBackoff(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    const result = await response.json();
                    
                    const candidate = result.candidates?.[0];
                    if (candidate && candidate.content?.parts?.[0]?.text) {
                        let text = candidate.content.parts[0].text;
                        const groundingMetadata = candidate.groundingMetadata;
                        let sources = [];
                        if (groundingMetadata && groundingMetadata.groundingAttributions) {
                            sources = groundingMetadata.groundingAttributions
                                .map(attribution => ({
                                    uri: attribution.web?.uri,
                                    title: attribution.web?.title,
                                }))
                                .filter(source => source.uri && source.title);
                        }
                        
                        // Add citations to the text
                        if (sources.length > 0) {
                            text += "\n\n**Sources:**\n";
                            sources.forEach((source, index) => {
                                text += `${index + 1}. [${source.title}](${source.uri})\n`;
                            });
                        }
                        geminiOutput.textContent = text;
                    } else {
                        geminiOutput.textContent = "Sorry, I couldn't generate a response. Please try again.";
                    }
                } catch (error) {
                    console.error("Error calling Gemini API:", error);
                    geminiOutput.textContent = "An error occurred. Please check the console for details.";
                } finally {
                    loadingIndicator.classList.add('hidden');
                }
            });
        });
    </script>
</body>
</html>
